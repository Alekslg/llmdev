<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –ß–∞—Ç-–±–æ—Ç–æ–≤: FastAPI, Redis, SQLite, Docker Compose, Aiogram</title>
  <meta name="description" content="–ü–æ—à–∞–≥–æ–≤—ã–π –∫—É—Ä—Å –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é —á–∞—Ç-–±–æ—Ç–æ–≤ –Ω–∞ Python —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º FastAPI, Redis, SQLite, Docker Compose –∏ Aiogram." />
  <style>
    :root {
      --bg: #f8fafc;
      --card: #ffffff;
      --ink: #1e293b;
      --ink-dim: #64748b;
      --accent: #3b82f6;
      --accent-2: #10b981;
      --warn: #f59e0b;
      --err: #ef4444;
      --code-bg: #f1f5f9;
      --border: #e2e8f0;
      --header-bg: #f1f5f9;
    }
    
    html, body {
      background: var(--bg);
      color: var(--ink);
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      line-height: 1.7;
      margin: 0;
      padding: 0;
    }
    
    .wrap {
      max-width: 1100px;
      margin: 40px auto;
      padding: 0 20px;
    }
    
    h1, h2, h3, h4 {
      color: var(--ink);
      margin-top: 1.5em;
      margin-bottom: 0.5em;
    }
    
    h1 {
      font-size: 2.2rem;
      text-align: center;
      margin: 0 0 12px;
      letter-spacing: 0.3px;
      border-bottom: 3px solid var(--accent);
      padding-bottom: 15px;
    }
    
    .subtitle {
      color: var(--ink-dim);
      text-align: center;
      margin-bottom: 26px;
      font-size: 1.1rem;
    }
    
    .kicker {
      display: inline-block;
      background: linear-gradient(90deg, var(--accent), var(--accent-2));
      color: white;
      padding: 4px 10px;
      border-radius: 999px;
      font-weight: 700;
      font-size: 0.8rem;
      margin-bottom: 10px;
    }
    
    .grid {
      display: grid;
      gap: 18px;
    }
    
    .grid.cols-2 {
      grid-template-columns: 1fr;
    }
    
    @media (min-width: 900px) {
      .grid.cols-2 {
        grid-template-columns: 1fr 1fr;
      }
    }
    
    .card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 18px 20px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
      margin-bottom: 25px;
    }
    
    a {
      color: var(--accent);
      text-decoration: none;
    }
    
    a:hover {
      text-decoration: underline;
    }
    
    code {
      background: var(--code-bg);
      color: var(--ink);
      padding: 2px 6px;
      border-radius: 6px;
      font-family: 'Monaco', 'Consolas', 'Courier New', monospace;
      font-size: 0.9em;
    }
    
    pre {
      background: var(--code-bg);
      color: var(--ink);
      padding: 14px 16px;
      border-radius: 12px;
      overflow: auto;
      font-size: 0.9rem;
      border: 1px solid var(--border);
    }
    
    pre code {
      background: none;
      padding: 0;
    }
    
    .toc {
      background: var(--header-bg);
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 18px 20px;
      margin-bottom: 30px;
    }
    
    .toc ul {
      margin: 0;
      padding-left: 20px;
    }
    
    .badge {
      display: inline-block;
      border: 1px solid var(--border);
      padding: 2px 8px;
      border-radius: 999px;
      font-size: 0.75rem;
      color: var(--ink-dim);
    }
    
    .tip {
      border-left: 4px solid var(--accent-2);
      background: #f0fdf4;
      padding: 10px 14px;
      border-radius: 0 6px 6px 0;
      margin: 15px 0;
    }
    
    .warn {
      border-left: 4px solid var(--warn);
      background: #fffbeb;
      padding: 10px 14px;
      border-radius: 0 6px 6px 0;
      margin: 15px 0;
    }
    
    .danger {
      border-left: 4px solid var(--err);
      background: #fef2f2;
      padding: 10px 14px;
      border-radius: 0 6px 6px 0;
      margin: 15px 0;
    }
    
    .muted {
      color: var(--ink-dim);
    }
    
    .footer {
      margin: 50px 0 30px;
      text-align: center;
      color: var(--ink-dim);
      border-top: 1px solid var(--border);
      padding-top: 20px;
    }
    
    .pill {
      display: inline-block;
      padding: 3px 8px;
      border-radius: 999px;
      background: var(--header-bg);
      border: 1px solid var(--border);
      font-size: 0.8rem;
      color: var(--ink-dim);
    }
    
    .kbd {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      border: 1px solid #94a3b8;
      background: var(--header-bg);
      border-bottom-width: 3px;
      padding: 1px 6px;
      border-radius: 6px;
    }
    
    .mermaid {
      background: var(--header-bg);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 10px;
      text-align: center;
    }
    
    table {
      border-collapse: collapse;
      width: 100%;
      margin: 15px 0;
    }
    
    th, td {
      border: 1px solid var(--border);
      padding: 8px 10px;
      text-align: left;
    }
    
    th {
      background: var(--header-bg);
      font-weight: 600;
    }
    
    .roadmap {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin: 10px 0 0;
    }
    
    .roadmap .step {
      background: var(--header-bg);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 8px 10px;
      font-size: 0.9rem;
    }
    
    ul, ol {
      padding-left: 20px;
    }
    
    li {
      margin-bottom: 8px;
    }
    
    details {
      margin: 15px 0;
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 10px;
    }
    
    details summary {
      cursor: pointer;
      font-weight: 600;
      margin: -10px -10px 10px -10px;
      padding: 10px;
      background: var(--header-bg);
      border-radius: 6px 6px 0 0;
    }
    
    .section-nav {
      display: flex;
      justify-content: space-between;
      margin-top: 20px;
      padding-top: 20px;
      border-top: 1px solid var(--border);
    }
    
    .nav-link {
      padding: 8px 16px;
      border-radius: 6px;
      background: var(--header-bg);
      text-decoration: none;
      font-weight: 500;
    }
    
    .nav-link:hover {
      background: var(--accent);
      color: white;
      text-decoration: none;
    }
  </style>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <script>document.addEventListener('DOMContentLoaded', () => hljs.highlightAll());</script>
  <script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ 
      startOnLoad: true, 
      theme: 'default',
      themeVariables: {
        primaryColor: '#e2e8f0',
        primaryBorderColor: '#cbd5e1',
        primaryTextColor: '#1e293b'
      }
    });
  </script>
</head>
<body>
  <div class="wrap">
    <div class="kicker">–ö—É—Ä—Å 2025</div>
    <h1>–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –ß–∞—Ç-–±–æ—Ç–æ–≤: –û—Ç –ü—Ä–æ—Ç–æ—Ç–∏–ø–∞ –¥–æ –ü—Ä–æ–¥–∞–∫—à–µ–Ω–∞</h1>
    <p class="subtitle">–° FastAPI, Redis, SQLite, Docker Compose –∏ Aiogram</p>
    
    <div class="toc">
      <h2>üìö –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ</h2>
      <ul>
        <li><a href="#intro">1. –í–≤–µ–¥–µ–Ω–∏–µ –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞</a></li>
        <li><a href="#environment">2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ –æ—Å–Ω–æ–≤—ã</a></li>
        <li><a href="#fastapi">3. FastAPI: –°–æ–∑–¥–∞–Ω–∏–µ RESTful API</a></li>
        <li><a href="#sqlite">4. SQLite: –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö</a></li>
        <li><a href="#redis">5. Redis: –°–æ—Å—Ç–æ—è–Ω–∏–µ, –∫—ç—à –∏ –æ—á–µ—Ä–µ–¥–∏</a></li>
        <li><a href="#aiogram">6. Aiogram: –°–æ–∑–¥–∞–Ω–∏–µ Telegram –±–æ—Ç–∞</a></li>
        <li><a href="#docker">7. Docker Compose: –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤</a></li>
        <li><a href="#integration">8. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤</a></li>
        <li><a href="#advanced">9. –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏</a></li>
        <li><a href="#testing">10. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</a></li>
        <li><a href="#deployment">11. –î–µ–ø–ª–æ–π –∏ Best Practices</a></li>
        <li><a href="#projects">12. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–µ–∫—Ç—ã</a></li>
        <li><a href="#faq">13. FAQ –∏ —Ä–µ—Å—É—Ä—Å—ã</a></li>
      </ul>
    </div>

    <section id="intro" class="card">
      <h2>1) –í–≤–µ–¥–µ–Ω–∏–µ –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞</h2>
      <p>–≠—Ç–æ—Ç –∫—É—Ä—Å –ø–æ—Å–≤—è—â–µ–Ω —Å–æ–∑–¥–∞–Ω–∏—é –Ω–∞–¥–µ–∂–Ω—ã—Ö, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã—Ö –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —á–∞—Ç-–±–æ—Ç–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Å—Ç–µ–∫–∞ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π: <strong>FastAPI</strong> –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è API, <strong>Redis</strong> –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∏ –æ—á–µ—Ä–µ–¥—è–º–∏, <strong>SQLite</strong> –¥–ª—è –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö, <strong>Docker Compose</strong> –¥–ª—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏ —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ <strong>Aiogram</strong> –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ Telegram-–±–æ—Ç–æ–≤.</p>
      
      <div class="grid cols-2">
        <div class="card">
          <h3>–ü–æ—á–µ–º—É –∏–º–µ–Ω–Ω–æ —ç—Ç–æ—Ç —Å—Ç–µ–∫?</h3>
          <ul>
            <li><strong>FastAPI</strong>: –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π, –±—ã—Å—Ç—Ä—ã–π –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.</li>
            <li><strong>Redis</strong>: –í—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏—è, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –æ—á–µ—Ä–µ–¥–µ–π.</li>
            <li><strong>SQLite</strong>: –õ–µ–≥–∫–æ–≤–µ—Å–Ω–∞—è –≤—Å—Ç—Ä–∞–∏–≤–∞–µ–º–∞—è –°–£–ë–î –¥–ª—è –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö.</li>
            <li><strong>Docker Compose</strong>: –£–ø—Ä–æ—â–∞–µ—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–Ω–æ–≥–æ–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏.</li>
            <li><strong>Aiogram</strong>: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è Telegram-–±–æ—Ç–æ–≤.</li>
          </ul>
        </div>
        <div class="card">
          <h3>–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥</h3>
          <ul>
            <li>–ù—É–∂–µ–Ω –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã–π –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π —á–∞—Ç-–±–æ—Ç.</li>
            <li>–¢—Ä–µ–±—É–µ—Ç—Å—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –±–æ—Ç–∞.</li>
            <li>–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Ö—Ä–∞–Ω–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∏—Å—Ç–æ—Ä–∏—é –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π.</li>
            <li>–ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ API –∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏.</li>
            <li>–í–∞–∂–Ω–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –¥–µ–ø–ª–æ—è.</li>
          </ul>
        </div>
      </div>
      
      <h3>–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã</h3>
      <div class="mermaid">
      graph TD
        A[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å Telegram] --> B[Aiogram –ë–æ—Ç]
        B --> C[FastAPI API]
        C --> D[–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞]
        D --> E[Redis]
        D --> F[SQLite]
        D --> G[LangChain/LMM]
      </div>
      
      <h3>–î–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞ –æ–±—É—á–µ–Ω–∏—è</h3>
      <div class="roadmap">
        <div class="step">–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è</div>
        <div class="step">FastAPI API</div>
        <div class="step">SQLite –¥–∞–Ω–Ω—ã–µ</div>
        <div class="step">Redis –∫—ç—à/—Å–æ—Å—Ç–æ—è–Ω–∏–µ</div>
        <div class="step">Aiogram –±–æ—Ç</div>
        <div class="step">Docker Compose</div>
        <div class="step">–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è</div>
        <div class="step">–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</div>
        <div class="step">–î–µ–ø–ª–æ–π</div>
      </div>
      
      <div class="section-nav">
        <a href="#environment" class="nav-link">–°–ª–µ–¥—É—é—â–∏–π: –û–∫—Ä—É–∂–µ–Ω–∏–µ ‚Üí</a>
      </div>
    </section>

    <section id="environment" class="card">
      <h2>2) –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ –æ—Å–Ω–æ–≤—ã</h2>
      <h3>–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤</h3>
      <pre><code class="language-bash"># –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
# –°–∫–∞—á–∞–π—Ç–µ —Å python.org –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–µ–Ω–µ–¥–∂–µ—Ä –ø–∞–∫–µ—Ç–æ–≤

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker –∏ Docker Compose
# –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –Ω–∞ https://docs.docker.com/get-docker/
# –∏ https://docs.docker.com/compose/install/

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
python --version
docker --version
docker-compose --version</code></pre>
      
      <h3>–°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è Python</h3>
      <pre><code class="language-bash"># –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
python -m venv chatbot-env

# –ê–∫—Ç–∏–≤–∞—Ü–∏—è (Linux/macOS)
source chatbot-env/bin/activate

# –ê–∫—Ç–∏–≤–∞—Ü–∏—è (Windows)
chatbot-env\Scripts\activate

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ pip
pip install --upgrade pip</code></pre>
      
      <h3>–ë–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã Docker/Docker Compose</h3>
      <pre><code class="language-bash"># –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose up

# –ó–∞–ø—É—Å–∫ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
docker-compose up -d

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose down

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs

# –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
docker-compose exec service_name command</code></pre>
      
      <h3>–°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞</h3>
      <pre><code class="language-bash">mkdir chatbot-project
cd chatbot-project

# –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–∞—Ç–∞–ª–æ–≥–æ–≤
mkdir -p app app/api app/bot app/models app/schemas app/database app/core tests

# –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
touch app/__init__.py
touch app/main.py
touch app/api/__init__.py
touch app/bot/__init__.py
touch app/bot/bot.py
touch app/models/__init__.py
touch app/schemas/__init__.py
touch app/database/__init__.py
touch app/database/database.py
touch app/core/__init__.py
touch app/core/config.py
touch docker-compose.yml
touch Dockerfile
touch requirements.txt
touch .env
touch .gitignore</code></pre>
      
      <div class="section-nav">
        <a href="#intro" class="nav-link">‚Üê –ü—Ä–µ–¥—ã–¥—É—â–∏–π: –í–≤–µ–¥–µ–Ω–∏–µ</a>
        <a href="#fastapi" class="nav-link">–°–ª–µ–¥—É—é—â–∏–π: FastAPI ‚Üí</a>
      </div>
    </section>

    <section id="fastapi" class="card">
      <h2>3) FastAPI: –°–æ–∑–¥–∞–Ω–∏–µ RESTful API</h2>
      <h3>–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π</h3>
      <pre><code class="language-bash">pip install fastapi uvicorn pydantic</code></pre>
      
      <h3>–û—Å–Ω–æ–≤—ã FastAPI: –º–∞—Ä—à—Ä—É—Ç—ã –∏ –º–æ–¥–µ–ª–∏ Pydantic</h3>
      <pre><code class="language-python"># app/main.py
from fastapi import FastAPI
from pydantic import BaseModel
from typing import List, Optional

app = FastAPI(title="Chatbot API", version="1.0.0")

class User(BaseModel):
    id: int
    username: str
    first_name: Optional[str] = None
    last_name: Optional[str] = None

class Message(BaseModel):
    id: int
    user_id: int
    text: str
    timestamp: str

# –ü—Ä–∏–º–µ—Ä –º–∞—Ä—à—Ä—É—Ç–æ–≤
@app.get("/")
def read_root():
    return {"message": "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Chatbot API"}

@app.get("/users/", response_model=List[User])
def read_users():
    return [
        User(id=1, username="user1", first_name="–ò–≤–∞–Ω", last_name="–ò–≤–∞–Ω–æ–≤"),
        User(id=2, username="user2", first_name="–ú–∞—Ä–∏—è", last_name="–ü–µ—Ç—Ä–æ–≤–∞")
    ]

@app.get("/users/{user_id}", response_model=User)
def read_user(user_id: int):
    return User(id=user_id, username="user1", first_name="–ò–≤–∞–Ω", last_name="–ò–≤–∞–Ω–æ–≤")

@app.post("/messages/", response_model=Message)
def create_message(message: Message):
    return message

if __name__ == "__main__":
    import uvicorn
    uvicorn.run(app, host="0.0.0.0", port=8000)</code></pre>
      
      <h3>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (Swagger)</h3>
      <p>FastAPI –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é:</p>
      <ul>
        <li>Swagger UI: <a href="http://localhost:8000/docs">http://localhost:8000/docs</a></li>
        <li>ReDoc: <a href="http://localhost:8000/redoc">http://localhost:8000/redoc</a></li>
      </ul>
      
      <h3>–í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö</h3>
      <pre><code class="language-python"># app/schemas/user.py
from pydantic import BaseModel, Field, validator
from typing import Optional

class UserCreate(BaseModel):
    username: str = Field(..., min_length=3, max_length=50)
    first_name: Optional[str] = Field(None, max_length=50)
    last_name: Optional[str] = Field(None, max_length=50)
    email: str
    
    @validator('email')
    def validate_email(cls, v):
        if '@' not in v:
            raise ValueError('–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email')
        return v

class UserUpdate(BaseModel):
    first_name: Optional[str] = Field(None, max_length=50)
    last_name: Optional[str] = Field(None, max_length=50)</code></pre>
      
      <h3>Middleware –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫</h3>
      <pre><code class="language-python"># app/main.py (–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ)
from fastapi import FastAPI, HTTPException
from fastapi.middleware.cors import CORSMiddleware
import logging

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(__name__)

app = FastAPI(title="Chatbot API", version="1.0.0")

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ CORS middleware
app.add_middleware(
    CORSMiddleware,
    allow_origins=["*"],
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –æ—à–∏–±–æ–∫
@app.exception_handler(HTTPException)
async def http_exception_handler(request, exc):
    logger.error(f"HTTP error: {exc.detail}")
    return {"error": exc.detail}

@app.exception_handler(Exception)
async def general_exception_handler(request, exc):
    logger.error(f"General error: {str(exc)}")
    return {"error": "Internal server error"}</code></pre>
      
      <div class="section-nav">
        <a href="#environment" class="nav-link">‚Üê –ü—Ä–µ–¥—ã–¥—É—â–∏–π: –û–∫—Ä—É–∂–µ–Ω–∏–µ</a>
        <a href="#sqlite" class="nav-link">–°–ª–µ–¥—É—é—â–∏–π: SQLite ‚Üí</a>
      </div>
    </section>

    <section id="sqlite" class="card">
      <h2>4) SQLite: –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö</h2>
      <h3>–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π</h3>
      <pre><code class="language-bash">pip install sqlalchemy aiosqlite</code></pre>
      
      <h3>–û—Å–Ω–æ–≤—ã SQL –∏ SQLite</h3>
      <p>SQLite - —ç—Ç–æ –ª–µ–≥–∫–æ–≤–µ—Å–Ω–∞—è –≤—Å—Ç—Ä–∞–∏–≤–∞–µ–º–∞—è –°–£–ë–î, –∫–æ—Ç–æ—Ä–∞—è —Ö—Ä–∞–Ω–∏—Ç –≤—Å—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ. –û–Ω–∞ –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –Ω–µ–±–æ–ª—å—à–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.</p>
      
      <h3>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ SQLAlchemy (ORM) —Å FastAPI</h3>
      <pre><code class="language-python"># app/database/database.py
from sqlalchemy import create_engine, Column, Integer, String, DateTime, ForeignKey
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy.orm import sessionmaker, relationship
from sqlalchemy.sql import func
import os

# –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –≤ –ø–∞–º—è—Ç–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏–ª–∏ —Ñ–∞–π–ª –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
DATABASE_URL = os.getenv("DATABASE_URL", "sqlite:///./chatbot.db")

engine = create_engine(DATABASE_URL, connect_args={"check_same_thread": False})
SessionLocal = sessionmaker(autocommit=False, autoflush=False, bind=engine)
Base = declarative_base()

# –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
def get_db():
    db = SessionLocal()
    try:
        yield db
    finally:
        db.close()</code></pre>
      
      <pre><code class="language-python"># app/models/user.py
from sqlalchemy import Column, Integer, String, DateTime
from sqlalchemy.sql import func
from app.database.database import Base

class User(Base):
    __tablename__ = "users"
    
    id = Column(Integer, primary_key=True, index=True)
    telegram_id = Column(Integer, unique=True, index=True)
    username = Column(String, index=True)
    first_name = Column(String)
    last_name = Column(String)
    created_at = Column(DateTime(timezone=True), server_default=func.now())
    updated_at = Column(DateTime(timezone=True), onupdate=func.now())</code></pre>
      
      <pre><code class="language-python"># app/models/message.py
from sqlalchemy import Column, Integer, String, DateTime, ForeignKey
from sqlalchemy.sql import func
from sqlalchemy.orm import relationship
from app.database.database import Base

class Message(Base):
    __tablename__ = "messages"
    
    id = Column(Integer, primary_key=True, index=True)
    user_id = Column(Integer, ForeignKey("users.id"))
    text = Column(String)
    timestamp = Column(DateTime(timezone=True), server_default=func.now())
    
    # –°–≤—è–∑—å —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
    user = relationship("User", back_populates="messages")</code></pre>
      
      <pre><code class="language-python"># app/models/user.py (–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ)
from sqlalchemy.orm import relationship

class User(Base):
    # ... –ø—Ä–µ–¥—ã–¥—É—â–∏–π –∫–æ–¥ ...
    
    # –°–≤—è–∑—å —Å —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
    messages = relationship("Message", back_populates="user")</code></pre>
      
      <h3>CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ API</h3>
      <pre><code class="language-python"># app/api/users.py
from fastapi import APIRouter, Depends, HTTPException
from sqlalchemy.orm import Session
from typing import List
from app.database.database import get_db
from app.models.user import User
from app.schemas.user import UserCreate, UserUpdate

router = APIRouter(prefix="/users", tags=["users"])

@router.get("/", response_model=List[User])
def read_users(skip: int = 0, limit: int = 100, db: Session = Depends(get_db)):
    users = db.query(User).offset(skip).limit(limit).all()
    return users

@router.get("/{user_id}", response_model=User)
def read_user(user_id: int, db: Session = Depends(get_db)):
    db_user = db.query(User).filter(User.id == user_id).first()
    if db_user is None:
        raise HTTPException(status_code=404, detail="–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω")
    return db_user

@router.post("/", response_model=User)
def create_user(user: UserCreate, db: Session = Depends(get_db)):
    db_user = User(**user.dict())
    db.add(db_user)
    db.commit()
    db.refresh(db_user)
    return db_user

@router.put("/{user_id}", response_model=User)
def update_user(user_id: int, user: UserUpdate, db: Session = Depends(get_db)):
    db_user = db.query(User).filter(User.id == user_id).first()
    if db_user is None:
        raise HTTPException(status_code=404, detail="–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω")
    
    for key, value in user.dict(exclude_unset=True).items():
        setattr(db_user, key, value)
    
    db.commit()
    db.refresh(db_user)
    return db_user

@router.delete("/{user_id}")
def delete_user(user_id: int, db: Session = Depends(get_db)):
    db_user = db.query(User).filter(User.id == user_id).first()
    if db_user is None:
        raise HTTPException(status_code=404, detail="–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω")
    
    db.delete(db_user)
    db.commit()
    return {"message": "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–¥–∞–ª–µ–Ω"}</code></pre>
      
      <div class="section-nav">
        <a href="#fastapi" class="nav-link">‚Üê –ü—Ä–µ–¥—ã–¥—É—â–∏–π: FastAPI</a>
        <a href="#redis" class="nav-link">–°–ª–µ–¥—É—é—â–∏–π: Redis ‚Üí</a>
      </div>
    </section>

    <section id="redis" class="card">
      <h2>5) Redis: –°–æ—Å—Ç–æ—è–Ω–∏–µ, –∫—ç—à –∏ –æ—á–µ—Ä–µ–¥–∏</h2>
      <h3>–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π</h3>
      <pre><code class="language-bash">pip install redis</code></pre>
      
      <h3>–û—Å–Ω–æ–≤—ã Redis: –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ, —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö</h3>
      <p>Redis - —ç—Ç–æ –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ –≤ –ø–∞–º—è—Ç–∏, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö, —Ç–∞–∫–∏–µ –∫–∞–∫ —Å—Ç—Ä–æ–∫–∏, —Ö—ç—à–∏, —Å–ø–∏—Å–∫–∏, –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –∏ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–Ω–æ–∂–µ—Å—Ç–≤–∞.</p>
      
      <h3>–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Redis</h3>
      <pre><code class="language-python"># app/core/config.py
import os

class Settings:
    DATABASE_URL = os.getenv("DATABASE_URL", "sqlite:///./chatbot.db")
    REDIS_URL = os.getenv("REDIS_URL", "redis://localhost:6379/0")
    TELEGRAM_TOKEN = os.getenv("TELEGRAM_TOKEN", "")

settings = Settings()</code></pre>
      
      <pre><code class="language-python"># app/core/redis_client.py
import redis
import json
from app.core.config import settings

# –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞ Redis
redis_client = redis.from_url(settings.REDIS_URL, decode_responses=True)

def set_user_state(user_id: int, state: str):
    """–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
    redis_client.set(f"user:{user_id}:state", state)

def get_user_state(user_id: int) -> str:
    """–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
    return redis_client.get(f"user:{user_id}:state") or "default"

def set_user_data(user_id: int, key: str, value):
    """–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö"""
    redis_client.hset(f"user:{user_id}:data", key, json.dumps(value))

def get_user_data(user_id: int, key: str):
    """–ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö"""
    value = redis_client.hget(f"user:{user_id}:data", key)
    return json.loads(value) if value else None

def delete_user_data(user_id: int, key: str):
    """–£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö"""
    redis_client.hdel(f"user:{user_id}:data", key)</code></pre>
      
      <h3>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Redis –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è FSM</h3>
      <pre><code class="language-python"># app/core/fsm.py
from app.core.redis_client import redis_client
import json

class FSMContext:
    def __init__(self, user_id: int):
        self.user_id = user_id
        self.storage_key = f"fsm:{user_id}"
    
    async def set_state(self, state: str):
        """–£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è"""
        redis_client.hset(self.storage_key, "state", state)
    
    async def get_state(self) -> str:
        """–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è"""
        return redis_client.hget(self.storage_key, "state") or "*"
    
    async def set_data(self, data: dict):
        """–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö"""
        redis_client.hset(self.storage_key, "data", json.dumps(data))
    
    async def get_data(self) -> dict:
        """–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö"""
        data = redis_client.hget(self.storage_key, "data")
        return json.loads(data) if data else {}
    
    async def update_data(self, **kwargs):
        """–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö"""
        current_data = await self.get_data()
        current_data.update(kwargs)
        await self.set_data(current_data)
    
    async def reset_state(self):
        """–°–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è"""
        redis_client.delete(self.storage_key)</code></pre>
      
      <h3>–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö</h3>
      <pre><code class="language-python"># app/core/cache.py
from app.core.redis_client import redis_client
import json
from typing import Optional

def cache_set(key: str, value, expiration: int = 3600):
    """–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ –∫—ç—à"""
    redis_client.setex(key, expiration, json.dumps(value))

def cache_get(key: str):
    """–ü–æ–ª—É—á–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –∫—ç—à–∞"""
    value = redis_client.get(key)
    return json.loads(value) if value else None

def cache_delete(key: str):
    """–£–¥–∞–ª–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –∫—ç—à–∞"""
    redis_client.delete(key)

# –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ API
from app.database.database import get_db
from app.models.user import User

def get_user_cached(user_id: int, db):
    """–ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º"""
    # –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–ª—É—á–∏—Ç—å –∏–∑ –∫—ç—à–∞
    cached_user = cache_get(f"user:{user_id}")
    if cached_user:
        return cached_user
    
    # –ï—Å–ª–∏ –Ω–µ—Ç –≤ –∫—ç—à–µ, –ø–æ–ª—É—á–∞–µ–º –∏–∑ –ë–î
    db_user = db.query(User).filter(User.id == user_id).first()
    if db_user:
        user_data = {
            "id": db_user.id,
            "username": db_user.username,
            "first_name": db_user.first_name,
            "last_name": db_user.last_name
        }
        # –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∫—ç—à –Ω–∞ 10 –º–∏–Ω—É—Ç
        cache_set(f"user:{user_id}", user_data, 600)
        return user_data
    
    return None</code></pre>
      
      <h3>–û—á–µ—Ä–µ–¥–∏ –∑–∞–¥–∞—á</h3>
      <pre><code class="language-python"># app/core/queue.py
from app.core.redis_client import redis_client
import json

def enqueue_task(queue_name: str, task_data: dict):
    """–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ –≤ –æ—á–µ—Ä–µ–¥—å"""
    redis_client.lpush(queue_name, json.dumps(task_data))

def dequeue_task(queue_name: str) -> Optional[dict]:
    """–ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ –∏–∑ –æ—á–µ—Ä–µ–¥–∏"""
    task = redis_client.brpop(queue_name, timeout=1)
    if task:
        return json.loads(task[1])
    return None

def get_queue_length(queue_name: str) -> int:
    """–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–ª–∏–Ω—ã –æ—á–µ—Ä–µ–¥–∏"""
    return redis_client.llen(queue_name)

# –ü—Ä–∏–º–µ—Ä –∑–∞–¥–∞—á–∏ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
def enqueue_message_processing(user_id: int, message_text: str):
    """–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –æ—á–µ—Ä–µ–¥—å"""
    task_data = {
        "user_id": user_id,
        "message_text": message_text,
        "timestamp": str(datetime.now())
    }
    enqueue_task("message_processing_queue", task_data)</code></pre>
      
      <div class="section-nav">
        <a href="#sqlite" class="nav-link">‚Üê –ü—Ä–µ–¥—ã–¥—É—â–∏–π: SQLite</a>
        <a href="#aiogram" class="nav-link">–°–ª–µ–¥—É—é—â–∏–π: Aiogram ‚Üí</a>
      </div>
    </section>

    <section id="aiogram" class="card">
      <h2>6) Aiogram: –°–æ–∑–¥–∞–Ω–∏–µ Telegram –±–æ—Ç–∞</h2>
      <h3>–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π</h3>
      <pre><code class="language-bash">pip install aiogram python-dotenv</code></pre>
      
      <h3>–û—Å–Ω–æ–≤—ã Aiogram 3.x: –¥–∏—Å–ø–µ—Ç—á–µ—Ä, —Ä–æ—É—Ç–µ—Ä—ã, —Ö—ç–Ω–¥–ª–µ—Ä—ã</h3>
      <pre><code class="language-python"># app/bot/bot.py
import asyncio
import logging
from aiogram import Bot, Dispatcher, Router, types
from aiogram.filters import Command
from aiogram.types import Message
from app.core.config import settings
from app.core.fsm import FSMContext

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(__name__)

# –°–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–∞ –∏ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞
bot = Bot(token=settings.TELEGRAM_TOKEN)
dp = Dispatcher()

# –°–æ–∑–¥–∞–Ω–∏–µ —Ä–æ—É—Ç–µ—Ä–∞
router = Router()

@router.message(Command(commands=["start"]))
async def command_start_handler(message: Message) -> None:
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start"""
    await message.answer(f"–ü—Ä–∏–≤–µ—Ç, {message.from_user.full_name}! –Ø —á–∞—Ç-–±–æ—Ç.")

@router.message(Command(commands=["help"]))
async def command_help_handler(message: Message) -> None:
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /help"""
    help_text = """
–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
/start - –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É
/help - –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–º–æ—â—å
/status - –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç—É—Å
"""
    await message.answer(help_text)

@router.message()
async def echo_handler(message: Message) -> None:
    """–≠—Ö–æ-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π"""
    try:
        # –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ API –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
        # –ó–¥–µ—Å—å –±—É–¥–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å FastAPI
        await message.answer(f"–í—ã —Å–∫–∞–∑–∞–ª–∏: {message.text}")
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è: {e}")
        await message.answer("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –≤–∞—à–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è.")

# –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–æ—É—Ç–µ—Ä–∞
dp.include_router(router)

async def main() -> None:
    """–ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞"""
    logger.info("–ó–∞–ø—É—Å–∫ –±–æ—Ç–∞...")
    try:
        await dp.start_polling(bot)
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞: {e}")
    finally:
        await bot.session.close()

if __name__ == "__main__":
    asyncio.run(main())</code></pre>
      
      <h3>–ü–æ–ª—É—á–µ–Ω–∏–µ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π</h3>
      <pre><code class="language-python"># app/bot/handlers/message_handlers.py
from aiogram import Router
from aiogram.types import Message
from aiogram.filters import Command
import aiohttp
from app.core.config import settings

router = Router()

@router.message(Command(commands=["status"]))
async def status_handler(message: Message):
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ API"""
    try:
        async with aiohttp.ClientSession() as session:
            async with session.get(f"{settings.API_BASE_URL}/health") as response:
                if response.status == 200:
                    await message.answer("‚úÖ API —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ")
                else:
                    await message.answer("‚ùå API –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ")
    except Exception as e:
        await message.answer(f"‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ API: {str(e)}")

@router.message()
async def message_handler(message: Message):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—Å–µ—Ö —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π"""
    user_id = message.from_user.id
    text = message.text
    
    # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ API
    try:
        async with aiohttp.ClientSession() as session:
            user_data = {
                "telegram_id": user_id,
                "username": message.from_user.username,
                "first_name": message.from_user.first_name,
                "last_name": message.from_user.last_name
            }
            
            # –°–æ–∑–¥–∞–Ω–∏–µ –∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            async with session.post(
                f"{settings.API_BASE_URL}/users/", 
                json=user_data
            ) as response:
                if response.status == 200 or response.status == 409:  # 409 - —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
                    # –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ API
                    message_data = {
                        "user_id": user_id,
                        "text": text
                    }
                    async with session.post(
                        f"{settings.API_BASE_URL}/messages/", 
                        json=message_data
                    ) as msg_response:
                        if msg_response.status == 200:
                            result = await msg_response.json()
                            await message.answer(f"–°–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–æ: {result.get('id')}")
                        else:
                            await message.answer("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏—è")
                else:
                    await message.answer("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è")
    except Exception as e:
        await message.answer(f"–û—à–∏–±–∫–∞: {str(e)}")</code></pre>
      
      <h3>–ú–∞—à–∏–Ω–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π (FSM) —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Redis</h3>
      <pre><code class="language-python"># app/bot/states.py
from enum import Enum

class UserState(Enum):
    DEFAULT = "default"
    WAITING_FOR_NAME = "waiting_for_name"
    WAITING_FOR_AGE = "waiting_for_age"
    PROFILE_COMPLETE = "profile_complete"

# app/bot/handlers/fsm_handlers.py
from aiogram import Router
from aiogram.types import Message
from aiogram.filters import Command
from app.core.fsm import FSMContext
from app.bot.states import UserState

router = Router()

@router.message(Command(commands=["register"]))
async def start_registration(message: Message, state: FSMContext):
    """–ù–∞—á–∞–ª–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
    await state.set_state(UserState.WAITING_FOR_NAME)
    await message.answer("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è:")

@router.message(lambda message: message.text and not message.text.startswith("/"))
async def process_name(message: Message, state: FSMContext):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
    current_state = await state.get_state()
    
    if current_state == UserState.WAITING_FOR_NAME.value:
        await state.update_data(name=message.text)
        await state.set_state(UserState.WAITING_FOR_AGE)
        await message.answer("–°–ø–∞—Å–∏–±–æ! –¢–µ–ø–µ—Ä—å –≤–≤–µ–¥–∏—Ç–µ –≤–∞—à –≤–æ–∑—Ä–∞—Å—Ç:")
    
    elif current_state == UserState.WAITING_FOR_AGE.value:
        try:
            age = int(message.text)
            await state.update_data(age=age)
            await state.set_state(UserState.PROFILE_COMPLETE)
            
            # –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
            user_data = await state.get_data()
            name = user_data.get("name")
            
            await message.answer(f"–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!\n–ò–º—è: {name}\n–í–æ–∑—Ä–∞—Å—Ç: {age}")
            await state.reset_state()
        except ValueError:
            await message.answer("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –≤–æ–∑—Ä–∞—Å—Ç (—á–∏—Å–ª–æ):")
    
    else:
        await message.answer("–ù–µ –ø–æ–Ω–∏–º–∞—é. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /register –¥–ª—è –Ω–∞—á–∞–ª–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.")</code></pre>
      
      <h3>Inline-–∫–Ω–æ–ø–∫–∏, –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã</h3>
      <pre><code class="language-python"># app/bot/keyboards.py
from aiogram.types import ReplyKeyboardMarkup, KeyboardButton, InlineKeyboardMarkup, InlineKeyboardButton

# –û–±—ã—á–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞
def get_main_keyboard():
    keyboard = ReplyKeyboardMarkup(
        keyboard=[
            [KeyboardButton(text="–ü—Ä–æ—Ñ–∏–ª—å"), KeyboardButton(text="–ù–∞—Å—Ç—Ä–æ–π–∫–∏")],
            [KeyboardButton(text="–ü–æ–º–æ—â—å"), KeyboardButton(text="–û –±–æ—Ç–µ")]
        ],
        resize_keyboard=True
    )
    return keyboard

# Inline-–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞
def get_profile_keyboard():
    keyboard = InlineKeyboardMarkup(
        inline_keyboard=[
            [InlineKeyboardButton(text="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å", callback_data="edit_profile")],
            [InlineKeyboardButton(text="–£–¥–∞–ª–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å", callback_data="delete_profile")],
            [InlineKeyboardButton(text="–ù–∞–∑–∞–¥", callback_data="back_to_main")]
        ]
    )
    return keyboard

# app/bot/handlers/callback_handlers.py
from aiogram import Router
from aiogram.types import CallbackQuery

router = Router()

@router.callback_query(lambda c: c.data == "edit_profile")
async def edit_profile_callback(callback: CallbackQuery):
    await callback.message.edit_text("–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è...")
    await callback.answer()

@router.callback_query(lambda c: c.data == "delete_profile")
async def delete_profile_callback(callback: CallbackQuery):
    await callback.message.edit_text("–ü—Ä–æ—Ñ–∏–ª—å —É–¥–∞–ª–µ–Ω.")
    await callback.answer()

@router.callback_query(lambda c: c.data == "back_to_main")
async def back_to_main_callback(callback: CallbackQuery):
    from app.bot.keyboards import get_main_keyboard
    await callback.message.edit_text("–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", reply_markup=get_main_keyboard())
    await callback.answer()</code></pre>
      
      <div class="section-nav">
        <a href="#redis" class="nav-link">‚Üê –ü—Ä–µ–¥—ã–¥—É—â–∏–π: Redis</a>
        <a href="#docker" class="nav-link">–°–ª–µ–¥—É—é—â–∏–π: Docker ‚Üí</a>
      </div>
    </section>

    <section id="docker" class="card">
      <h2>7) Docker Compose: –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤</h2>
      <h3>–°–æ–∑–¥–∞–Ω–∏–µ Dockerfile –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è FastAPI</h3>
      <pre><code class="language-dockerfile"># Dockerfile
FROM python:3.11-slim

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —Å–∏—Å—Ç–µ–º—ã
RUN apt-get update && apt-get install -y \
    gcc \
    && rm -rf /var/lib/apt/lists/*

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–∞–±–æ—á–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
WORKDIR /app

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
COPY requirements.txt .

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
RUN pip install --no-cache-dir -r requirements.txt

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞
COPY . .

# –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
RUN mkdir -p /app/data

# –û—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ—Ä—Ç–∞
EXPOSE 8000

# –ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞
CMD ["uvicorn", "app.main:app", "--host", "0.0.0.0", "--port", "8000"]</code></pre>
      
      <h3>–°–æ–∑–¥–∞–Ω–∏–µ Dockerfile –¥–ª—è –±–æ—Ç–∞</h3>
      <pre><code class="language-dockerfile"># Dockerfile.bot
FROM python:3.11-slim

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —Å–∏—Å—Ç–µ–º—ã
RUN apt-get update && apt-get install -y \
    gcc \
    && rm -rf /var/lib/apt/lists/*

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–∞–±–æ—á–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
WORKDIR /app

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
COPY requirements.txt .

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
RUN pip install --no-cache-dir -r requirements.txt

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞
COPY . .

# –ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞
CMD ["python", "app/bot/bot.py"]</code></pre>
      
      <h3>–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è docker-compose.yml</h3>
      <pre><code class="language-yaml"># docker-compose.yml
version: '3.8'

services:
  # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö SQLite (–≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ —Ñ–∞–π–ª –≤ volume)
  # –î–ª—è SQLite –Ω–µ –Ω—É–∂–µ–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å, –Ω–æ –¥–ª—è –¥—Ä—É–≥–∏—Ö –ë–î –º–æ–∂–µ—Ç –ø–æ–Ω–∞–¥–æ–±–∏—Ç—å—Å—è
  
  # Redis
  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data
    command: redis-server --appendonly yes

  # FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
  api:
    build: .
    ports:
      - "8000:8000"
    environment:
      - DATABASE_URL=sqlite:///./data/chatbot.db
      - REDIS_URL=redis://redis:6379/0
    volumes:
      - ./data:/app/data
    depends_on:
      - redis
    restart: unless-stopped

  # Telegram –±–æ—Ç
  bot:
    build:
      context: .
      dockerfile: Dockerfile.bot
    environment:
      - TELEGRAM_TOKEN=${TELEGRAM_TOKEN}
      - API_BASE_URL=http://api:8000
      - REDIS_URL=redis://redis:6379/0
    depends_on:
      - api
      - redis
    restart: unless-stopped

volumes:
  redis_data:</code></pre>
      
      <h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)</h3>
      <pre><code class="bash"># .env
TELEGRAM_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞_–æ—Ç_@BotFather
DATABASE_URL=sqlite:///./data/chatbot.db
REDIS_URL=redis://localhost:6379/0
API_BASE_URL=http://localhost:8000</code></pre>
      
      <pre><code class="python"># app/core/config.py (–æ–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)
import os
from dotenv import load_dotenv

load_dotenv()

class Settings:
    TELEGRAM_TOKEN = os.getenv("TELEGRAM_TOKEN")
    DATABASE_URL = os.getenv("DATABASE_URL", "sqlite:///./data/chatbot.db")
    REDIS_URL = os.getenv("REDIS_URL", "redis://localhost:6379/0")
    API_BASE_URL = os.getenv("API_BASE_URL", "http://localhost:8000")

    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
    def validate(self):
        if not self.TELEGRAM_TOKEN:
            raise ValueError("TELEGRAM_TOKEN –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ .env —Ñ–∞–π–ª–µ")

settings = Settings()</code></pre>
      
      <h3>–ó–∞–ø—É—Å–∫, –æ—Å—Ç–∞–Ω–æ–≤–∫–∞, –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ</h3>
      <pre><code class="language-bash"># –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose up

# –ó–∞–ø—É—Å–∫ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
docker-compose up -d

# –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose ps

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
docker-compose logs api

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose down

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ —É–¥–∞–ª–µ–Ω–∏–µ volumes
docker-compose down -v

# –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–æ–≤
docker-compose build

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
docker-compose restart bot

# –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –±–æ—Ç–∞)
docker-compose up -d --scale bot=3</code></pre>
      
      <div class="section-nav">
        <a href="#aiogram" class="nav-link">‚Üê –ü—Ä–µ–¥—ã–¥—É—â–∏–π: Aiogram</a>
        <a href="#integration" class="nav-link">–°–ª–µ–¥—É—é—â–∏–π: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è ‚Üí</a>
      </div>
    </section>

    <section id="integration" class="card">
      <h2>8) –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤</h2>
      <h3>–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Aiogram –±–æ—Ç–∞ –∫ FastAPI API</h3>
      <pre><code class="language-python"># app/bot/services/api_client.py
import aiohttp
from typing import Optional, Dict, Any
from app.core.config import settings
import logging

logger = logging.getLogger(__name__)

class APIClient:
    def __init__(self):
        self.base_url = settings.API_BASE_URL
        self.session: Optional[aiohttp.ClientSession] = None
    
    async def get_session(self) -> aiohttp.ClientSession:
        """–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏ HTTP –∫–ª–∏–µ–Ω—Ç–∞"""
        if self.session is None or self.session.closed:
            self.session = aiohttp.ClientSession()
        return self.session
    
    async def close(self):
        """–ó–∞–∫—Ä—ã—Ç–∏–µ —Å–µ—Å—Å–∏–∏"""
        if self.session and not self.session.closed:
            await self.session.close()
    
    async def create_user(self, user_data: Dict[str, Any]) -> Optional[Dict]:
        """–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ API"""
        try:
            session = await self.get_session()
            async with session.post(f"{self.base_url}/users/", json=user_data) as response:
                if response.status == 200:
                    return await response.json()
                else:
                    logger.error(f"–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: {response.status}")
                    return None
        except Exception as e:
            logger.error(f"–ò—Å–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: {e}")
            return None
    
    async def get_user(self, user_id: int) -> Optional[Dict]:
        """–ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ API"""
        try:
            session = await self.get_session()
            async with session.get(f"{self.base_url}/users/{user_id}") as response:
                if response.status == 200:
                    return await response.json()
                else:
                    return None
        except Exception as e:
            logger.error(f"–ò—Å–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: {e}")
            return None
    
    async def create_message(self, message_data: Dict[str, Any]) -> Optional[Dict]:
        """–°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ API"""
        try:
            session = await self.get_session()
            async with session.post(f"{self.base_url}/messages/", json=message_data) as response:
                if response.status == 200:
                    return await response.json()
                else:
                    logger.error(f"–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è: {response.status}")
                    return None
        except Exception as e:
            logger.error(f"–ò—Å–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏—è: {e}")
            return None

# –ì–ª–æ–±–∞–ª—å–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∏–µ–Ω—Ç–∞
api_client = APIClient()</code></pre>
      
      <pre><code class="language-python"># app/bot/bot.py (–æ–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)
import asyncio
import logging
from aiogram import Bot, Dispatcher, Router
from aiogram.filters import Command
from aiogram.types import Message
from app.core.config import settings
from app.bot.services.api_client import api_client

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(__name__)

# –°–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–∞ –∏ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞
bot = Bot(token=settings.TELEGRAM_TOKEN)
dp = Dispatcher()

# –°–æ–∑–¥–∞–Ω–∏–µ —Ä–æ—É—Ç–µ—Ä–∞
router = Router()

@router.message(Command(commands=["start"]))
async def command_start_handler(message: Message) -> None:
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start"""
    user_data = {
        "telegram_id": message.from_user.id,
        "username": message.from_user.username,
        "first_name": message.from_user.first_name,
        "last_name": message.from_user.last_name
    }
    
    # –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ API
    result = await api_client.create_user(user_data)
    if result:
        await message.answer(f"–ü—Ä–∏–≤–µ—Ç, {message.from_user.full_name}! –í—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã.")
    else:
        await message.answer(f"–ü—Ä–∏–≤–µ—Ç, {message.from_user.full_name}!")

@router.message()
async def message_handler(message: Message) -> None:
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—Å–µ—Ö —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π"""
    try:
        # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ API
        message_data = {
            "user_id": message.from_user.id,
            "text": message.text
        }
        
        result = await api_client.create_message(message_data)
        if result:
            await message.answer(f"–°–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–æ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ (ID: {result.get('id')})")
        else:
            await message.answer("–°–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–æ, –Ω–æ –Ω–µ —É–¥–∞–ª–æ—Å—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å.")
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è: {e}")
        await message.answer("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –≤–∞—à–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è.")

# –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–æ—É—Ç–µ—Ä–∞
dp.include_router(router)

async def main() -> None:
    """–ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞"""
    logger.info("–ó–∞–ø—É—Å–∫ –±–æ—Ç–∞...")
    try:
        await dp.start_polling(bot)
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞: {e}")
    finally:
        await bot.session.close()
        await api_client.close()

if __name__ == "__main__":
    asyncio.run(main())</code></pre>
      
      <h3>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Redis –¥–ª—è –æ–±–º–µ–Ω–∞ –¥–∞–Ω–Ω—ã–º–∏ –º–µ–∂–¥—É –±–æ—Ç–æ–º –∏ API</h3>
      <pre><code class="language-python"># app/core/redis_client.py (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)
import redis
import json
from typing import Optional, Dict, Any
from app.core.config import settings

# –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞ Redis
redis_client = redis.from_url(settings.REDIS_URL, decode_responses=True)

def publish_event(channel: str, event_data: Dict[str, Any]):
    """–ü—É–±–ª–∏–∫–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏—è –≤ Redis"""
    redis_client.publish(channel, json.dumps(event_data))

def subscribe_to_channel(channel: str):
    """–ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∫–∞–Ω–∞–ª Redis"""
    pubsub = redis_client.pubsub()
    pubsub.subscribe(channel)
    return pubsub

# –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—É–∂–µ –±—ã–ª–∏)
def set_user_state(user_id: int, state: str):
    redis_client.set(f"user:{user_id}:state", state)

def get_user_state(user_id: int) -> str:
    return redis_client.get(f"user:{user_id}:state") or "default"

def set_user_data(user_id: int, key: str, value):
    redis_client.hset(f"user:{user_id}:data", key, json.dumps(value))

def get_user_data(user_id: int, key: str):
    value = redis_client.hget(f"user:{user_id}:data", key)
    return json.loads(value) if value else None

def delete_user_data(user_id: int, key: str):
    redis_client.hdel(f"user:{user_id}:data", key)</code></pre>
      
      <pre><code class="language-python"># app/bot/services/notification_service.py
from app.core.redis_client import subscribe_to_channel
import asyncio
import json
import logging

logger = logging.getLogger(__name__)

class NotificationService:
    def __init__(self, bot):
        self.bot = bot
        self.pubsub = subscribe_to_channel("notifications")
    
    async def listen_for_notifications(self):
        """–ü—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∏–∑ Redis"""
        for message in self.pubsub.listen():
            if message['type'] == 'message':
                try:
                    data = json.loads(message['data'])
                    await self.handle_notification(data)
                except Exception as e:
                    logger.error(f"–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è: {e}")
    
    async def handle_notification(self, data: dict):
        """–û–±—Ä–∞–±–æ—Ç–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è"""
        notification_type = data.get('type')
        user_id = data.get('user_id')
        message = data.get('message')
        
        if notification_type == 'reminder':
            try:
                await self.bot.send_message(chat_id=user_id, text=message)
            except Exception as e:
                logger.error(f"–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é {user_id}: {e}")

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –±–æ—Ç–µ
# notification_service = NotificationService(bot)
# asyncio.create_task(notification_service.listen_for_notifications())</code></pre>
      
      <h3>–û–±–µ—Å–ø–µ—á–µ–Ω–∏–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É SQLite –∏ Redis</h3>
      <pre><code class="language-python"># app/services/data_sync.py
from app.core.redis_client import redis_client
from app.database.database import get_db
from app.models.user import User
import json
import logging

logger = logging.getLogger(__name__)

def sync_user_to_cache(user_id: int, db):
    """–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –ë–î –≤ Redis –∫—ç—à"""
    try:
        user = db.query(User).filter(User.id == user_id).first()
        if user:
            user_data = {
                "id": user.id,
                "telegram_id": user.telegram_id,
                "username": user.username,
                "first_name": user.first_name,
                "last_name": user.last_name
            }
            # –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ Redis –Ω–∞ 10 –º–∏–Ω—É—Ç
            redis_client.setex(f"user:{user_id}", 600, json.dumps(user_data))
            logger.info(f"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {user_id} —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω –≤ –∫—ç—à")
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {user_id}: {e}")

def get_user_with_cache(user_id: int, db):
    """–ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∫—ç—à–∞"""
    try:
        # –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–ª—É—á–∏—Ç—å –∏–∑ –∫—ç—à–∞
        cached_user = redis_client.get(f"user:{user_id}")
        if cached_user:
            return json.loads(cached_user)
        
        # –ï—Å–ª–∏ –Ω–µ—Ç –≤ –∫—ç—à–µ, –ø–æ–ª—É—á–∞–µ–º –∏–∑ –ë–î
        user = db.query(User).filter(User.id == user_id).first()
        if user:
            user_data = {
                "id": user.id,
                "telegram_id": user.telegram_id,
                "username": user.username,
                "first_name": user.first_name,
                "last_name": user.last_name
            }
            # –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∫—ç—à
            redis_client.setex(f"user:{user_id}", 600, json.dumps(user_data))
            return user_data
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {user_id}: {e}")
    
    return None</code></pre>
      
      <h3>–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤–æ –≤—Å–µ–π —Å–∏—Å—Ç–µ–º–µ</h3>
      <pre><code class="language-python"># app/core/exceptions.py
class ChatBotException(Exception):
    """–ë–∞–∑–æ–≤–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è —á–∞—Ç-–±–æ—Ç–∞"""
    pass

class UserNotFoundException(ChatBotException):
    """–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω"""
    pass

class MessageProcessingException(ChatBotException):
    """–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è"""
    pass

class ExternalServiceException(ChatBotException):
    """–û—à–∏–±–∫–∞ –≤–Ω–µ—à–Ω–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞"""
    pass

# app/core/error_handler.py
import logging
from fastapi import HTTPException
from app.core.exceptions import ChatBotException

logger = logging.getLogger(__name__)

def handle_exception(exc: Exception):
    """–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏—Å–∫–ª—é—á–µ–Ω–∏–π"""
    if isinstance(exc, ChatBotException):
        logger.error(f"ChatBot –æ—à–∏–±–∫–∞: {exc}")
        # –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
        raise HTTPException(status_code=400, detail=str(exc))
    elif isinstance(exc, HTTPException):
        logger.error(f"HTTP –æ—à–∏–±–∫–∞: {exc.detail}")
        raise exc
    else:
        logger.error(f"–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞: {exc}")
        raise HTTPException(status_code=500, detail="–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞")</code></pre>
      
      <div class="section-nav">
        <a href="#docker" class="nav-link">‚Üê –ü—Ä–µ–¥—ã–¥—É—â–∏–π: Docker</a>
        <a href="#advanced" class="nav-link">–°–ª–µ–¥—É—é—â–∏–π: –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ ‚Üí</a>
      </div>
    </section>

    <section id="advanced" class="card">
      <h2>9) –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏</h2>
      
      <h3>–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å LangChain</h3>
      <pre><code class="language-bash">pip install langchain langchain-openai</code></pre>
      
      <pre><code class="language-python"># app/services/llm_service.py
from langchain_openai import ChatOpenAI
from langchain_core.prompts import ChatPromptTemplate
from langchain_core.output_parsers import StrOutputParser
import os
from typing import Dict, Any

class LLMService:
    def __init__(self):
        self.llm = ChatOpenAI(
            model="gpt-4o-mini",
            temperature=0.7,
            openai_api_key=os.getenv("OPENAI_API_KEY")
        )
        self.parser = StrOutputParser()
    
    def create_chain(self, system_prompt: str):
        """–°–æ–∑–¥–∞–Ω–∏–µ —Ü–µ–ø–æ—á–∫–∏ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤"""
        prompt = ChatPromptTemplate.from_messages([
            ("system", system_prompt),
            ("human", "{input}")
        ])
        return prompt | self.llm | self.parser
    
    async def process_message(self, message: str, context: Dict[str, Any] = None) -> str:
        """–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –ø–æ–º–æ—â—å—é LLM"""
        try:
            # –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–ª—è –ø—Ä–æ–º–ø—Ç–∞
            system_prompt = "–í—ã –ø–æ–ª–µ–∑–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç. –û—Ç–≤–µ—á–∞–π—Ç–µ –∫—Ä–∞—Ç–∫–æ –∏ –ø–æ –¥–µ–ª—É."
            if context:
                system_prompt += f"\n–ö–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: {context}"
            
            chain = self.create_chain(system_prompt)
            response = chain.invoke({"input": message})
            return response
        except Exception as e:
            return f"–ò–∑–≤–∏–Ω–∏—Ç–µ, –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∑–∞–ø—Ä–æ—Å–∞: {str(e)}"

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–∞
llm_service = LLMService()</code></pre>
      
      <pre><code class="language-python"># app/api/llm.py
from fastapi import APIRouter, HTTPException
from pydantic import BaseModel
from typing import Optional, Dict, Any
from app.services.llm_service import llm_service

router = APIRouter(prefix="/llm", tags=["llm"])

class LLMRequest(BaseModel):
    message: str
    context: Optional[Dict[str, Any]] = None

class LLMResponse(BaseModel):
    response: str

@router.post("/process", response_model=LLMResponse)
async def process_message(request: LLMRequest):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –ø–æ–º–æ—â—å—é LLM"""
    try:
        response = await llm_service.process_message(request.message, request.context)
        return LLMResponse(response=response)
    except Exception as e:
        raise HTTPException(status_code=500, detail=str(e))</code></pre>
      
      <h3>Background tasks –≤ FastAPI</h3>
      <pre><code class="language-python"># app/tasks/message_processor.py
from fastapi import BackgroundTasks
from app.database.database import get_db
from app.models.message import Message
from app.services.llm_service import llm_service
import logging

logger = logging.getLogger(__name__)

async def process_message_background(message_id: int, message_text: str, user_id: int):
    """–§–æ–Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è"""
    try:
        logger.info(f"–ù–∞—á–∞–ª–æ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è {message_id}")
        
        # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å –ø–æ–º–æ—â—å—é LLM
        response = await llm_service.process_message(message_text)
        
        # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
        # –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–∞
        
        logger.info(f"–°–æ–æ–±—â–µ–Ω–∏–µ {message_id} –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ —É—Å–ø–µ—à–Ω–æ")
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è {message_id}: {e}")

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ API
from fastapi import APIRouter, Depends

router = APIRouter(prefix="/messages", tags=["messages"])

@router.post("/")
async def create_message(
    message: Message, 
    background_tasks: BackgroundTasks,
    db = Depends(get_db)
):
    # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –ë–î
    db_message = Message(**message.dict())
    db.add(db_message)
    db.commit()
    db.refresh(db_message)
    
    # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ–Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏
    background_tasks.add_task(
        process_message_background, 
        db_message.id, 
        db_message.text, 
        db_message.user_id
    )
    
    return db_message</code></pre>
      
      <h3>–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥</h3>
      <pre><code class="language-python"># app/core/logging.py
import logging
import logging.handlers
import os
from datetime import datetime

def setup_logging():
    """–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è"""
    # –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –ª–æ–≥–æ–≤
    log_dir = "logs"
    if not os.path.exists(log_dir):
        os.makedirs(log_dir)
    
    # –§–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤
    formatter = logging.Formatter(
        '%(asctime)s - %(name)s - %(levelname)s - %(message)s'
    )
    
    # –ö–æ—Ä–Ω–µ–≤–æ–π –ª–æ–≥–≥–µ—Ä
    root_logger = logging.getLogger()
    root_logger.setLevel(logging.INFO)
    
    # –§–∞–π–ª–æ–≤—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å —Ä–æ—Ç–∞—Ü–∏–µ–π
    file_handler = logging.handlers.RotatingFileHandler(
        f"{log_dir}/app.log",
        maxBytes=10*1024*1024,  # 10MB
        backupCount=5
    )
    file_handler.setFormatter(formatter)
    root_logger.addHandler(file_handler)
    
    # –ö–æ–Ω—Å–æ–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
    console_handler = logging.StreamHandler()
    console_handler.setFormatter(formatter)
    root_logger.addHandler(console_handler)
    
    return root_logger

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
# logger = setup_logging()</code></pre>
      
      <pre><code class="language-python"># app/core/monitoring.py
import time
import functools
import logging
from typing import Callable, Any

logger = logging.getLogger(__name__)

def monitor_performance(func: Callable) -> Callable:
    """–î–µ–∫–æ—Ä–∞—Ç–æ—Ä –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏"""
    @functools.wraps(func)
    async def wrapper(*args, **kwargs) -> Any:
        start_time = time.time()
        try:
            result = await func(*args, **kwargs)
            execution_time = time.time() - start_time
            logger.info(f"{func.__name__} –≤—ã–ø–æ–ª–Ω–µ–Ω –∑–∞ {execution_time:.4f} —Å–µ–∫—É–Ω–¥")
            return result
        except Exception as e:
            execution_time = time.time() - start_time
            logger.error(f"{func.__name__} –∑–∞–≤–µ—Ä—à–∏–ª—Å—è —Å –æ—à–∏–±–∫–æ–π –∑–∞ {execution_time:.4f} —Å–µ–∫—É–Ω–¥: {e}")
            raise
    return wrapper

# –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
@monitor_performance
async def process_user_message(message: str) -> str:
    # –õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è
    time.sleep(0.1)  # –ò–º–∏—Ç–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
    return f"–û–±—Ä–∞–±–æ—Ç–∞–Ω–æ: {message}"</code></pre>
      
      <h3>–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</h3>
      <pre><code class="language-python"># app/core/auth.py
from fastapi import Depends, HTTPException, status
from fastapi.security import HTTPBearer, HTTPAuthorizationCredentials
import jwt
from typing import Optional
from datetime import datetime, timedelta
from app.core.config import settings

security = HTTPBearer()

# –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è JWT (–≤ production –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ env –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é)
SECRET_KEY = "your-secret-key-change-in-production"
ALGORITHM = "HS256"

def create_access_token(data: dict, expires_delta: Optional[timedelta] = None):
    """–°–æ–∑–¥–∞–Ω–∏–µ JWT —Ç–æ–∫–µ–Ω–∞"""
    to_encode = data.copy()
    if expires_delta:
        expire = datetime.utcnow() + expires_delta
    else:
        expire = datetime.utcnow() + timedelta(minutes=15)
    to_encode.update({"exp": expire})
    encoded_jwt = jwt.encode(to_encode, SECRET_KEY, algorithm=ALGORITHM)
    return encoded_jwt

def verify_token(credentials: HTTPAuthorizationCredentials = Depends(security)):
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ JWT —Ç–æ–∫–µ–Ω–∞"""
    try:
        token = credentials.credentials
        payload = jwt.decode(token, SECRET_KEY, algorithms=[ALGORITHM])
        return payload
    except jwt.PyJWTError:
        raise HTTPException(
            status_code=status.HTTP_401_UNAUTHORIZED,
            detail="–ù–µ–≤–µ—Ä–Ω—ã–π —Ç–æ–∫–µ–Ω",
            headers={"WWW-Authenticate": "Bearer"},
        )

# –ü—Ä–∏–º–µ—Ä –∑–∞—â–∏—â–µ–Ω–Ω–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞
from fastapi import APIRouter

router = APIRouter(prefix="/admin", tags=["admin"])

@router.get("/protected")
async def protected_route(user: dict = Depends(verify_token)):
    return {"message": "–ó–∞—â–∏—â–µ–Ω–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç", "user": user}</code></pre>
      
      <div class="section-nav">
        <a href="#integration" class="nav-link">‚Üê –ü—Ä–µ–¥—ã–¥—É—â–∏–π: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è</a>
        <a href="#testing" class="nav-link">–°–ª–µ–¥—É—é—â–∏–π: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Üí</a>
      </div>
    </section>

    <section id="testing" class="card">
      <h2>10) –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</h2>
      <h3>–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h3>
      <pre><code class="language-bash">pip install pytest pytest-asyncio httpx aiounittest</code></pre>
      
      <h3>–ú–æ–¥—É–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (pytest) –¥–ª—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏</h3>
      <pre><code class="language-python"># tests/test_llm_service.py
import pytest
from unittest.mock import AsyncMock, patch
from app.services.llm_service import LLMService

@pytest.fixture
def llm_service():
    return LLMService()

@pytest.mark.asyncio
async def test_process_message_success(llm_service):
    """–¢–µ—Å—Ç —É—Å–ø–µ—à–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è"""
    with patch.object(llm_service, 'llm', new_callable=AsyncMock) as mock_llm:
        mock_llm.invoke.return_value = "–¢–µ—Å—Ç–æ–≤—ã–π –æ—Ç–≤–µ—Ç"
        
        result = await llm_service.process_message("–ü—Ä–∏–≤–µ—Ç")
        assert result == "–¢–µ—Å—Ç–æ–≤—ã–π –æ—Ç–≤–µ—Ç"

@pytest.mark.asyncio
async def test_process_message_with_context(llm_service):
    """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º"""
    with patch.object(llm_service, 'llm', new_callable=AsyncMock) as mock_llm:
        mock_llm.invoke.return_value = "–û—Ç–≤–µ—Ç —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º"
        
        context = {"user_name": "–ê–ª–µ–∫—Å"}
        result = await llm_service.process_message("–ü—Ä–∏–≤–µ—Ç", context)
        assert result == "–û—Ç–≤–µ—Ç —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º"</code></pre>
      
      <pre><code class="language-python"># tests/test_fsm.py
import pytest
from app.core.fsm import FSMContext

@pytest.mark.asyncio
async def test_fsm_state_management():
    """–¢–µ—Å—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º FSM"""
    fsm = FSMContext(user_id=123)
    
    # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
    await fsm.set_state("waiting_for_input")
    state = await fsm.get_state()
    assert state == "waiting_for_input"
    
    # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö
    await fsm.set_data({"name": "–ê–ª–µ–∫—Å", "age": 30})
    data = await fsm.get_data()
    assert data == {"name": "–ê–ª–µ–∫—Å", "age": 30}
    
    # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
    await fsm.update_data(age=31)
    data = await fsm.get_data()
    assert data == {"name": "–ê–ª–µ–∫—Å", "age": 31}
    
    # –°–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è
    await fsm.reset_state()
    state = await fsm.get_state()
    assert state == "*"</code></pre>
      
      <h3>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API (FastAPI TestClient)</h3>
      <pre><code class="language-python"># tests/test_api.py
import pytest
from fastapi.testclient import TestClient
from app.main import app
from app.database.database import Base, engine
from sqlalchemy.orm import sessionmaker

# –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
TestingSessionLocal = sessionmaker(autocommit=False, autoflush=False, bind=engine)

@pytest.fixture(scope="session")
def test_db():
    Base.metadata.create_all(bind=engine)
    yield
    Base.metadata.drop_all(bind=engine)

@pytest.fixture
def client(test_db):
    with TestClient(app) as c:
        yield c

def test_read_root(client):
    """–¢–µ—Å—Ç –∫–æ—Ä–Ω–µ–≤–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞"""
    response = client.get("/")
    assert response.status_code == 200
    assert response.json() == {"message": "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Chatbot API"}

def test_create_user(client):
    """–¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
    user_data = {
        "telegram_id": 123456789,
        "username": "testuser",
        "first_name": "–¢–µ—Å—Ç",
        "last_name": "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"
    }
    
    response = client.post("/users/", json=user_data)
    assert response.status_code == 200
    data = response.json()
    assert data["username"] == "testuser"
    assert "id" in data

def test_get_users(client):
    """–¢–µ—Å—Ç –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π"""
    response = client.get("/users/")
    assert response.status_code == 200
    assert isinstance(response.json(), list)</code></pre>
      
      <h3>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Aiogram —Ö—ç–Ω–¥–ª–µ—Ä–æ–≤</h3>
      <pre><code class="language-python"># tests/test_bot_handlers.py
import pytest
from aiogram.types import Message, User, Chat
from aiogram.fsm.state import State, StatesGroup
from unittest.mock import AsyncMock, Mock
from app.bot.handlers.message_handlers import message_handler

class TestUserState(StatesGroup):
    state = State()

@pytest.mark.asyncio
async def test_message_handler():
    """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π"""
    # –°–æ–∑–¥–∞–Ω–∏–µ –º–æ–∫-–æ–±—ä–µ–∫—Ç–æ–≤
    message = Mock(spec=Message)
    message.from_user = Mock(spec=User)
    message.from_user.id = 123456789
    message.from_user.username = "testuser"
    message.from_user.first_name = "–¢–µ—Å—Ç"
    message.from_user.last_name = "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"
    message.text = "–ü—Ä–∏–≤–µ—Ç, –±–æ—Ç!"
    message.answer = AsyncMock()
    
    # –í—ã–∑–æ–≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞
    await message_handler(message)
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –±—ã–ª –≤—ã–∑–≤–∞–Ω –º–µ—Ç–æ–¥ answer
    message.answer.assert_called_once()</code></pre>
      
      <h3>–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã</h3>
      <pre><code class="language-python"># tests/test_integration.py
import pytest
from fastapi.testclient import TestClient
from aiogram import Bot, Dispatcher
from unittest.mock import AsyncMock, patch
from app.main import app
from app.bot.bot import bot, dp

@pytest.fixture
def api_client():
    return TestClient(app)

@pytest.mark.asyncio
async def test_user_registration_flow(api_client):
    """–¢–µ—Å—Ç –ø–æ–ª–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
    # 1. –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ API
    user_data = {
        "telegram_id": 987654321,
        "username": "newuser",
        "first_name": "–ù–æ–≤—ã–π",
        "last_name": "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"
    }
    
    response = api_client.post("/users/", json=user_data)
    assert response.status_code == 200
    user = response.json()
    assert user["username"] == "newuser"
    
    # 2. –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ API
    response = api_client.get(f"/users/{user['id']}")
    assert response.status_code == 200
    retrieved_user = response.json()
    assert retrieved_user["username"] == "newuser"

@pytest.mark.asyncio
async def test_message_processing_flow():
    """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ –±–æ—Ç–∞ –∏ API"""
    with patch('app.bot.services.api_client.api_client') as mock_api:
        # –ú–æ–∫–∞–µ–º API –∫–ª–∏–µ–Ω—Ç
        mock_api.create_user.return_value = {"id": 1, "username": "testuser"}
        mock_api.create_message.return_value = {"id": 1, "text": "–¢–µ—Å—Ç"}
        
        # –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
        from aiogram.types import Message, User, Chat
        
        message = Message(
            message_id=1,
            from_user=User(id=123456789, is_bot=False, first_name="–¢–µ—Å—Ç"),
            chat=Chat(id=123456789, type="private"),
            date=1234567890,
            text="–¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ"
        )
        
        message.answer = AsyncMock()
        
        # –ò–º–ø–æ—Ä—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞
        from app.bot.handlers.message_handlers import message_handler
        
        # –í—ã–∑–æ–≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞
        await message_handler(message)
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–∑–æ–≤–æ–≤ API
        mock_api.create_user.assert_called_once()
        mock_api.create_message.assert_called_once()
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–≤–µ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
        message.answer.assert_called_once()</code></pre>
      
      <h3>–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤</h3>
      <pre><code class="language-bash"># –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
pytest

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –≤—ã–≤–æ–¥–æ–º
pytest -v

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∫–æ–¥–∞
pytest --cov=app tests/

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞
pytest tests/test_api.py::test_read_root

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –≤ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–º —Ä–µ–∂–∏–º–µ
pytest -n auto</code></pre>
      
      <div class="section-nav">
        <a href="#advanced" class="nav-link">‚Üê –ü—Ä–µ–¥—ã–¥—É—â–∏–π: –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏</a>
        <a href="#deployment" class="nav-link">–°–ª–µ–¥—É—é—â–∏–π: –î–µ–ø–ª–æ–π ‚Üí</a>
      </div>
    </section>

    <section id="deployment" class="card">
      <h2>11) –î–µ–ø–ª–æ–π –∏ Best Practices</h2>
      
      <h3>–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É: –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, —Å–µ–∫—Ä–µ—Ç—ã</h3>
      <pre><code class="language-python"># app/core/config.py (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)
import os
from dotenv import load_dotenv

load_dotenv()

class Settings:
    # –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    PROJECT_NAME: str = "Chatbot API"
    VERSION: str = "1.0.0"
    DEBUG: bool = os.getenv("DEBUG", "False").lower() == "true"
    
    # –¢–µ–ª–µ–≥—Ä–∞–º
    TELEGRAM_TOKEN: str = os.getenv("TELEGRAM_TOKEN")
    
    # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
    DATABASE_URL: str = os.getenv("DATABASE_URL", "sqlite:///./data/chatbot.db")
    
    # Redis
    REDIS_URL: str = os.getenv("REDIS_URL", "redis://localhost:6379/0")
    
    # API
    API_BASE_URL: str = os.getenv("API_BASE_URL", "http://localhost:8000")
    
    # OpenAI
    OPENAI_API_KEY: str = os.getenv("OPENAI_API_KEY", "")
    
    # –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
    SECRET_KEY: str = os.getenv("SECRET_KEY", "your-secret-key-change-in-production")
    ACCESS_TOKEN_EXPIRE_MINUTES: int = int(os.getenv("ACCESS_TOKEN_EXPIRE_MINUTES", 30))
    
    # –õ–∏–º–∏—Ç—ã
    MESSAGE_RATE_LIMIT: int = int(os.getenv("MESSAGE_RATE_LIMIT", 10))  # —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –º–∏–Ω—É—Ç—É
    
    def validate(self):
        """–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö"""
        required_vars = []
        if not self.TELEGRAM_TOKEN:
            required_vars.append("TELEGRAM_TOKEN")
        if not self.SECRET_KEY or self.SECRET_KEY == "your-secret-key-change-in-production":
            required_vars.append("SECRET_KEY")
            
        if required_vars:
            raise ValueError(f"–°–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã: {', '.join(required_vars)}")

settings = Settings()</code></pre>
      
      <pre><code class="bash"># .env.production (–ø—Ä–∏–º–µ—Ä)
DEBUG=False
TELEGRAM_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞
DATABASE_URL=postgresql://user:password@db:5432/chatbot
REDIS_URL=redis://redis:6379/0
API_BASE_URL=http://api:8000
SECRET_KEY=–≤–∞—à_—Å–µ–∫—Ä–µ—Ç–Ω—ã–π_–∫–ª—é—á
OPENAI_API_KEY=–≤–∞—à_openai_–∫–ª—é—á
MESSAGE_RATE_LIMIT=5</code></pre>
      
      <h3>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ docker-compose.prod.yml</h3>
      <pre><code class="language-yaml"># docker-compose.prod.yml
version: '3.8'

services:
  redis:
    image: redis:7-alpine
    restart: unless-stopped
    volumes:
      - redis_data:/data
    command: redis-server --appendonly yes
    networks:
      - chatbot_network

  db:
    image: postgres:15-alpine
    restart: unless-stopped
    environment:
      POSTGRES_DB: chatbot
      POSTGRES_USER: chatbot_user
      POSTGRES_PASSWORD: ${DB_PASSWORD}
    volumes:
      - postgres_data:/var/lib/postgresql/data
    networks:
      - chatbot_network

  api:
    build: .
    restart: unless-stopped
    environment:
      - DATABASE_URL=postgresql://chatbot_user:${DB_PASSWORD}@db:5432/chatbot
      - REDIS_URL=redis://redis:6379/0
      - TELEGRAM_TOKEN=${TELEGRAM_TOKEN}
      - SECRET_KEY=${SECRET_KEY}
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - DEBUG=False
    volumes:
      - ./logs:/app/logs
    depends_on:
      - db
      - redis
    networks:
      - chatbot_network
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8000/health"]
      interval: 30s
      timeout: 10s
      retries: 3

  bot:
    build:
      context: .
      dockerfile: Dockerfile.bot
    restart: unless-stopped
    environment:
      - TELEGRAM_TOKEN=${TELEGRAM_TOKEN}
      - API_BASE_URL=http://api:8000
      - REDIS_URL=redis://redis:6379/0
      - DEBUG=False
    depends_on:
      - api
      - redis
    networks:
      - chatbot_network
    healthcheck:
      test: ["CMD", "python", "-c", "import aiogram; print('OK')"]
      interval: 30s
      timeout: 10s
      retries: 3

  nginx:
    image: nginx:alpine
    restart: unless-stopped
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf
      - ./ssl:/etc/nginx/ssl
    depends_on:
      - api
    networks:
      - chatbot_network

volumes:
  redis_data:
  postgres_data:

networks:
  chatbot_network:
    driver: bridge</code></pre>
      
      <h3>Healthchecks</h3>
      <pre><code class="language-python"># app/api/health.py
from fastapi import APIRouter, Depends
from sqlalchemy.orm import Session
from app.database.database import get_db
from app.models.user import User
import redis
from app.core.config import settings

router = APIRouter(prefix="/health", tags=["health"])

@router.get("/")
async def health_check(db: Session = Depends(get_db)):
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"""
    try:
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
        db.query(User).first()
        db_status = "ok"
    except Exception as e:
        db_status = f"error: {str(e)}"
    
    try:
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ Redis
        redis_client = redis.from_url(settings.REDIS_URL)
        redis_client.ping()
        redis_status = "ok"
    except Exception as e:
        redis_status = f"error: {str(e)}"
    
    return {
        "status": "ok" if db_status == "ok" and redis_status == "ok" else "error",
        "database": db_status,
        "redis": redis_status,
        "version": settings.VERSION
    }</code></pre>
      
      <pre><code class="language-python"># app/main.py (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ healthcheck)
from app.api import health

app.include_router(health.router)</code></pre>
      
      <h3>–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (SQLite, Redis)</h3>
      <pre><code class="language-bash"># backup.sh
#!/bin/bash

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏
BACKUP_DIR="/backups"
DATE=$(date +%Y%m%d_%H%M%S)
RETENTION_DAYS=7

# –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –±—ç–∫–∞–ø–æ–≤
mkdir -p $BACKUP_DIR

# –ë—ç–∫–∞–ø SQLite (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
if [ -f "./data/chatbot.db" ]; then
    cp ./data/chatbot.db $BACKUP_DIR/chatbot_backup_$DATE.db
    echo "SQLite backup created: $BACKUP_DIR/chatbot_backup_$DATE.db"
fi

# –ë—ç–∫–∞–ø Redis
docker-compose exec redis redis-cli BGSAVE
echo "Redis backup initiated"

# –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –±—ç–∫–∞–ø–æ–≤
find $BACKUP_DIR -name "chatbot_backup_*.db" -mtime +$RETENTION_DAYS -delete
echo "Old backups cleaned up"

echo "Backup completed at $DATE"</code></pre>
      
      <pre><code class="language-yaml"># docker-compose.backup.yml
version: '3.8'

services:
  backup:
    image: alpine
    volumes:
      - ./data:/app/data
      - ./backups:/app/backups
      - ./backup.sh:/app/backup.sh
    command: >
      sh -c "
        chmod +x /app/backup.sh &&
        crond -f -l 8 &
        /app/backup.sh &&
        tail -f /dev/null
      "
    environment:
      - CRON_SCHEDULE="0 2 * * *"  # –ï–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 2:00
    depends_on:
      - redis</code></pre>
      
      <h3>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö</h3>
      <pre><code class="language-python"># app/core/logging.py (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)
import logging
import logging.handlers
import os
from datetime import datetime

def setup_logging(log_level: str = "INFO"):
    """–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞"""
    # –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –ª–æ–≥–æ–≤
    log_dir = "/app/logs" if os.path.exists("/app/logs") else "./logs"
    if not os.path.exists(log_dir):
        os.makedirs(log_dir)
    
    # –§–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤
    formatter = logging.Formatter(
        '%(asctime)s - %(name)s - %(levelname)s - %(message)s'
    )
    
    # –ö–æ—Ä–Ω–µ–≤–æ–π –ª–æ–≥–≥–µ—Ä
    root_logger = logging.getLogger()
    root_logger.setLevel(getattr(logging, log_level.upper()))
    
    # –§–∞–π–ª–æ–≤—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å —Ä–æ—Ç–∞—Ü–∏–µ–π
    file_handler = logging.handlers.RotatingFileHandler(
        f"{log_dir}/app.log",
        maxBytes=50*1024*1024,  # 50MB
        backupCount=10
    )
    file_handler.setFormatter(formatter)
    root_logger.addHandler(file_handler)
    
    # –ö–æ–Ω—Å–æ–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ (–¥–ª—è Docker)
    console_handler = logging.StreamHandler()
    console_handler.setFormatter(formatter)
    root_logger.addHandler(console_handler)
    
    return root_logger

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
# logger = setup_logging(os.getenv("LOG_LEVEL", "INFO"))</code></pre>
      
      <pre><code class="language-yaml"># docker-compose.logging.yml (–¥–ª—è ELK —Å—Ç–µ–∫–∞)
version: '3.8'

services:
  elasticsearch:
    image: docker.elastic.co/elasticsearch/elasticsearch:8.11.0
    environment:
      - discovery.type=single-node
      - ES_JAVA_OPTS=-Xms1g -Xmx1g
    ports:
      - "9200:9200"
    volumes:
      - es_data:/usr/share/elasticsearch/data

  kibana:
    image: docker.elastic.co/kibana/kibana:8.11.0
    ports:
      - "5601:5601"
    depends_on:
      - elasticsearch

  logstash:
    image: docker.elastic.co/logstash/logstash:8.11.0
    volumes:
      - ./logstash.conf:/usr/share/logstash/pipeline/logstash.conf
      - ./logs:/app/logs
    depends_on:
      - elasticsearch

volumes:
  es_data:</code></pre>
      
      <h3>Best Practices</h3>
      <div class="tip">
        <strong>–°–æ–≤–µ—Ç—ã –ø–æ –¥–µ–ø–ª–æ—é:</strong>
        <ul>
          <li>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏</li>
          <li>–†–∞–∑–¥–µ–ª—è–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞</li>
          <li>–ù–∞—Å—Ç—Ä–æ–π—Ç–µ healthchecks –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤</li>
          <li>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—é –∏ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫—É –Ω–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏</li>
          <li>–†–µ–≥—É–ª—è—Ä–Ω–æ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ –¥–∞–Ω–Ω—ã—Ö</li>
          <li>–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ª–æ–≥–∏ –∏ –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</li>
          <li>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ</li>
        </ul>
      </div>
      
      <div class="section-nav">
        <a href="#testing" class="nav-link">‚Üê –ü—Ä–µ–¥—ã–¥—É—â–∏–π: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</a>
        <a href="#projects" class="nav-link">–°–ª–µ–¥—É—é—â–∏–π: –ü—Ä–æ–µ–∫—Ç—ã ‚Üí</a>
      </div>
    </section>

    <section id="projects" class="card">
      <h2>12) –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–µ–∫—Ç—ã</h2>
      
      <h3>–ü—Ä–æ–µ–∫—Ç 1: –ü—Ä–æ—Å—Ç–æ–π –±–æ—Ç-–Ω–∞–ø–æ–º–∏–Ω–∞—Ç–µ–ª—å —Å –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏</h3>
      <pre><code class="language-python"># app/bot/handlers/reminder_handlers.py
from aiogram import Router
from aiogram.types import Message
from aiogram.filters import Command
from app.core.fsm import FSMContext
from datetime import datetime, timedelta
import re

router = Router()

@router.message(Command(commands=["remind"]))
async def start_reminder(message: Message, state: FSMContext):
    """–ù–∞—á–∞–ª–æ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è"""
    await state.set_state("waiting_for_reminder_text")
    await message.answer("–ß—Ç–æ –≤–∞–º –Ω–∞–ø–æ–º–Ω–∏—Ç—å?")

@router.message(lambda message: not message.text.startswith("/"))
async def process_reminder_text(message: Message, state: FSMContext):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è"""
    current_state = await state.get_state()
    
    if current_state == "waiting_for_reminder_text":
        await state.update_data(reminder_text=message.text)
        await state.set_state("waiting_for_reminder_time")
        await message.answer("–ß–µ—Ä–µ–∑ —Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç –Ω–∞–ø–æ–º–Ω–∏—Ç—å? (–≤–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ)")
    
    elif current_state == "waiting_for_reminder_time":
        try:
            minutes = int(message.text)
            await state.update_data(reminder_minutes=minutes)
            
            # –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
            data = await state.get_data()
            text = data.get("reminder_text")
            
            # –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
            
            await message.answer(f"–•–æ—Ä–æ—à–æ, —è –Ω–∞–ø–æ–º–Ω—é –≤–∞–º '{text}' —á–µ—Ä–µ–∑ {minutes} –º–∏–Ω—É—Ç.")
            await state.reset_state()
        except ValueError:
            await message.answer("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —á–∏—Å–ª–æ –º–∏–Ω—É—Ç:")</code></pre>
      
      <pre><code class="language-python"># app/models/reminder.py
from sqlalchemy import Column, Integer, String, DateTime, ForeignKey, Boolean
from sqlalchemy.sql import func
from app.database.database import Base

class Reminder(Base):
    __tablename__ = "reminders"
    
    id = Column(Integer, primary_key=True, index=True)
    user_id = Column(Integer, ForeignKey("users.id"))
    text = Column(String)
    remind_at = Column(DateTime(timezone=True))
    created_at = Column(DateTime(timezone=True), server_default=func.now())
    is_completed = Column(Boolean, default=False)</code></pre>
      
      <h3>–ü—Ä–æ–µ–∫—Ç 2: –ë–æ—Ç —Å –º–Ω–æ–≥–æ—à–∞–≥–æ–≤—ã–º –æ–ø—Ä–æ—Å–æ–º (–∏—Å–ø–æ–ª—å–∑—É—è FSM)</h3>
      <pre><code class="language-python"># app/bot/handlers/survey_handlers.py
from aiogram import Router
from aiogram.types import Message
from aiogram.filters import Command
from app.core.fsm import FSMContext

router = Router()

# –í–æ–ø—Ä–æ—Å—ã –æ–ø—Ä–æ—Å–Ω–∏–∫–∞
SURVEY_QUESTIONS = [
    "–ö–∞–∫ –≤–∞—Å –∑–æ–≤—É—Ç?",
    "–°–∫–æ–ª—å–∫–æ –≤–∞–º –ª–µ—Ç?",
    "–ö–∞–∫–æ–π –≤–∞—à –ª—é–±–∏–º—ã–π —Ü–≤–µ—Ç?",
    "–ß–µ–º –≤—ã –∑–∞–Ω–∏–º–∞–µ—Ç–µ—Å—å?",
    "–ß—Ç–æ –≤–∞–º –Ω—Ä–∞–≤–∏—Ç—Å—è –≤ –Ω–∞—à–µ–º –±–æ—Ç–µ?"
]

@router.message(Command(commands=["survey"]))
async def start_survey(message: Message, state: FSMContext):
    """–ù–∞—á–∞–ª–æ –æ–ø—Ä–æ—Å–∞"""
    await state.set_state("survey_question_0")
    await state.update_data(current_question=0)
    await message.answer(SURVEY_QUESTIONS[0])

@router.message(lambda message: not message.text.startswith("/"))
async def process_survey_answer(message: Message, state: FSMContext):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –æ–ø—Ä–æ—Å"""
    current_state = await state.get_state()
    
    if current_state and current_state.startswith("survey_question_"):
        # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞
        data = await state.get_data()
        current_question = data.get("current_question", 0)
        answers = data.get("survey_answers", {})
        answers[current_question] = message.text
        await state.update_data(survey_answers=answers)
        
        # –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –≤–æ–ø—Ä–æ—Å—É
        next_question = current_question + 1
        if next_question < len(SURVEY_QUESTIONS):
            await state.set_state(f"survey_question_{next_question}")
            await state.update_data(current_question=next_question)
            await message.answer(SURVEY_QUESTIONS[next_question])
        else:
            # –û–ø—Ä–æ—Å –∑–∞–≤–µ—Ä—à–µ–Ω
            await finish_survey(message, state, answers)

async def finish_survey(message: Message, state: FSMContext, answers: dict):
    """–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –æ–ø—Ä–æ—Å–∞ –∏ –≤—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤"""
    result = "–°–ø–∞—Å–∏–±–æ –∑–∞ —É—á–∞—Å—Ç–∏–µ –≤ –æ–ø—Ä–æ—Å–µ!\n\n–í–∞—à–∏ –æ—Ç–≤–µ—Ç—ã:\n"
    for i, (question, answer) in enumerate(zip(SURVEY_QUESTIONS, answers.values())):
        result += f"{i+1}. {question}\n   –û—Ç–≤–µ—Ç: {answer}\n\n"
    
    await message.answer(result)
    await state.reset_state()</code></pre>
      
      <h3>–ü—Ä–æ–µ–∫—Ç 3: –ë–æ—Ç —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π –ò–ò –∏ –æ—á–µ—Ä–µ–¥—è–º–∏ –∑–∞–¥–∞—á</h3>
      <pre><code class="language-python"># app/tasks/ai_processing.py
from app.core.redis_client import enqueue_task, dequeue_task
from app.services.llm_service import llm_service
import asyncio
import json
import logging

logger = logging.getLogger(__name__)

async def ai_processing_worker():
    """–í–æ—Ä–∫–µ—Ä –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–¥–∞—á –ò–ò"""
    logger.info("–ó–∞–ø—É—Å–∫ AI processing worker")
    
    while True:
        try:
            # –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ –∏–∑ –æ—á–µ—Ä–µ–¥–∏
            task_data = dequeue_task("ai_processing_queue")
            if task_data:
                await process_ai_task(task_data)
            else:
                # –ï—Å–ª–∏ –Ω–µ—Ç –∑–∞–¥–∞—á, –∂–¥–µ–º –Ω–µ–º–Ω–æ–≥–æ
                await asyncio.sleep(1)
        except Exception as e:
            logger.error(f"–û—à–∏–±–∫–∞ –≤ AI worker: {e}")
            await asyncio.sleep(5)

async def process_ai_task(task_data: dict):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–¥–∞—á–∏ –ò–ò"""
    try:
        user_id = task_data.get("user_id")
        message_text = task_data.get("message_text")
        
        logger.info(f"–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {user_id}: {message_text}")
        
        # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å –ø–æ–º–æ—â—å—é LLM
        response = await llm_service.process_message(message_text)
        
        # –û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç–≤–µ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é (—á–µ—Ä–µ–∑ Redis –∏–ª–∏ –Ω–∞–ø—Ä—è–º—É—é)
        # –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Redis pub/sub –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –±–æ—Ç—É
        from app.core.redis_client import publish_event
        publish_event("bot_messages", {
            "user_id": user_id,
            "message": response,
            "type": "ai_response"
        })
        
        logger.info(f"–û—Ç–≤–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é {user_id}")
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–¥–∞—á–∏ –ò–ò: {e}")

# app/bot/handlers/ai_handlers.py
from aiogram import Router
from aiogram.types import Message
from app.core.redis_client import enqueue_task

router = Router()

@router.message()
async def ai_message_handler(message: Message):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–æ–±—â–µ–Ω–∏–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ò–ò"""
    # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ –≤ –æ—á–µ—Ä–µ–¥—å
    task_data = {
        "user_id": message.from_user.id,
        "message_text": message.text,
        "timestamp": str(datetime.now())
    }
    enqueue_task("ai_processing_queue", task_data)
    
    await message.answer("–í–∞—à –∑–∞–ø—Ä–æ—Å –ø—Ä–∏–Ω—è—Ç. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é —Å –ø–æ–º–æ—â—å—é –ò–ò...")</code></pre>
      
      <h3>–ü—Ä–æ–µ–∫—Ç 4: –ë–æ—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∞–º–∏</h3>
      <pre><code class="language-python"># app/models/task.py
from sqlalchemy import Column, Integer, String, DateTime, ForeignKey, Enum
from sqlalchemy.sql import func
from app.database.database import Base
import enum

class TaskStatus(enum.Enum):
    PENDING = "pending"
    IN_PROGRESS = "in_progress"
    COMPLETED = "completed"
    CANCELLED = "cancelled"

class Task(Base):
    __tablename__ = "tasks"
    
    id = Column(Integer, primary_key=True, index=True)
    user_id = Column(Integer, ForeignKey("users.id"))
    title = Column(String)
    description = Column(String)
    status = Column(Enum(TaskStatus), default=TaskStatus.PENDING)
    created_at = Column(DateTime(timezone=True), server_default=func.now())
    updated_at = Column(DateTime(timezone=True), onupdate=func.now())
    due_date = Column(DateTime(timezone=True))</code></pre>
      
      <pre><code class="language-python"># app/bot/handlers/task_handlers.py
from aiogram import Router
from aiogram.types import Message
from aiogram.filters import Command
from app.core.fsm import FSMContext
import re
from datetime import datetime

router = Router()

@router.message(Command(commands=["addtask"]))
async def start_add_task(message: Message, state: FSMContext):
    """–ù–∞—á–∞–ª–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∏"""
    await state.set_state("waiting_for_task_title")
    await message.answer("–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏:")

@router.message(Command(commands=["tasks"]))
async def list_tasks(message: Message):
    """–ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ –∑–∞–¥–∞—á"""
    # –ó–¥–µ—Å—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ª–æ–≥–∏–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∑–∞–¥–∞—á –∏–∑ API
    await message.answer("–°–ø–∏—Å–æ–∫ –≤–∞—à–∏—Ö –∑–∞–¥–∞—á:\n1. –ü—Ä–∏–º–µ—Ä –∑–∞–¥–∞—á–∏ (–≤ —Ä–∞–±–æ—Ç–µ)")

@router.message(lambda message: not message.text.startswith("/"))
async def process_task_creation(message: Message, state: FSMContext):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏"""
    current_state = await state.get_state()
    
    if current_state == "waiting_for_task_title":
        await state.update_data(task_title=message.text)
        await state.set_state("waiting_for_task_description")
        await message.answer("–í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏:")
    
    elif current_state == "waiting_for_task_description":
        await state.update_data(task_description=message.text)
        await state.set_state("waiting_for_task_due_date")
        await message.answer("–í–≤–µ–¥–∏—Ç–µ –¥–∞—Ç—É –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–≤ —Ñ–æ—Ä–º–∞—Ç–µ –î–î.–ú–ú.–ì–ì–ì–ì):")
    
    elif current_state == "waiting_for_task_due_date":
        try:
            due_date = datetime.strptime(message.text, "%d.%m.%Y")
            data = await state.get_data()
            
            # –ó–¥–µ—Å—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ª–æ–≥–∏–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ —á–µ—Ä–µ–∑ API
            
            await message.answer(f"–ó–∞–¥–∞—á–∞ '{data['task_title']}' —Å–æ–∑–¥–∞–Ω–∞!")
            await state.reset_state()
        except ValueError:
            await message.answer("–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç—ã. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –î–î.–ú–ú.–ì–ì–ì–ì:")</code></pre>
      
      <div class="section-nav">
        <a href="#deployment" class="nav-link">‚Üê –ü—Ä–µ–¥—ã–¥—É—â–∏–π: –î–µ–ø–ª–æ–π</a>
        <a href="#faq" class="nav-link">–°–ª–µ–¥—É—é—â–∏–π: FAQ ‚Üí</a>
      </div>
    </section>

    <section id="faq" class="card">
      <h2>13) FAQ –∏ —Ä–µ—Å—É—Ä—Å—ã</h2>
      
      <details>
        <summary><strong>–ö–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –≤ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏—è—Ö?</strong></summary>
        <p>–í –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏—è—Ö –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ try/except –±–ª–æ–∫–∏ –∏ –ª–æ–≥–∏—Ä—É–π—Ç–µ –æ—à–∏–±–∫–∏:</p>
        <pre><code class="language-python">async def async_function():
    try:
        # –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è
        result = await some_async_operation()
        return result
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –≤ async_function: {e}")
        # –ú–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∏–ª–∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –ø–æ–ø—ã—Ç–∫—É
        raise</code></pre>
      </details>
      
      <details>
        <summary><strong>–ö–∞–∫ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –±–æ—Ç–∞?</strong></summary>
        <ul>
          <li>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö</li>
          <li>–í—ã–Ω–æ—Å–∏—Ç–µ —Ç—è–∂–µ–ª—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ —Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏</li>
          <li>–û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–π—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –≤–Ω–µ—à–Ω–∏–º API</li>
          <li>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ connection pooling –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö</li>
          <li>–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ –∏ CPU</li>
        </ul>
      </details>
      
      <details>
        <summary><strong>–ö–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å rate limiting?</strong></summary>
        <pre><code class="language-python"># app/core/rate_limiter.py
import time
from collections import defaultdict

class RateLimiter:
    def __init__(self, max_requests: int, time_window: int):
        self.max_requests = max_requests
        self.time_window = time_window
        self.requests = defaultdict(list)
    
    def is_allowed(self, user_id: int) -> bool:
        now = time.time()
        # –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
        self.requests[user_id] = [
            req_time for req_time in self.requests[user_id] 
            if now - req_time < self.time_window
        ]
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–∞
        if len(self.requests[user_id]) < self.max_requests:
            self.requests[user_id].append(now)
            return True
        return False

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
rate_limiter = RateLimiter(max_requests=10, time_window=60)  # 10 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É

async def message_handler(message: Message):
    if not rate_limiter.is_allowed(message.from_user.id):
        await message.answer("–í—ã –ø—Ä–µ–≤—ã—Å–∏–ª–∏ –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ.")
        return
    # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è...</code></pre>
      </details>
      
      <details>
        <summary><strong>–ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —è–∑—ã–∫–æ–≤?</strong></summary>
        <pre><code class="language-python"># app/core/i18n.py
from typing import Dict

translations: Dict[str, Dict[str, str]] = {
    "ru": {
        "start_message": "–ü—Ä–∏–≤–µ—Ç! –Ø —á–∞—Ç-–±–æ—Ç.",
        "help_message": "–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã: /start, /help"
    },
    "en": {
        "start_message": "Hello! I'm a chatbot.",
        "help_message": "Available commands: /start, /help"
    }
}

def get_text(key: str, language: str = "ru") -> str:
    return translations.get(language, {}).get(key, key)

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
await message.answer(get_text("start_message", "ru"))</code></pre>
      </details>
      
      <details>
        <summary><strong>–ö–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å webhook –¥–ª—è Telegram –±–æ—Ç–∞?</strong></summary>
        <p>–î–ª—è –≤—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –±–æ—Ç–æ–≤ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å webhook –≤–º–µ—Å—Ç–æ polling:</p>
        <pre><code class="language-python"># app/bot/webhook.py
from aiogram import Bot, Dispatcher
from fastapi import FastAPI, Request, BackgroundTasks
import hashlib
import hmac

app = FastAPI()

WEBHOOK_SECRET = "your-webhook-secret"
WEBHOOK_PATH = "/webhook/telegram"

@app.post(WEBHOOK_PATH)
async def telegram_webhook(request: Request, background_tasks: BackgroundTasks):
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
    signature = request.headers.get("X-Telegram-Bot-Api-Secret-Token")
    if signature != WEBHOOK_SECRET:
        return {"error": "Invalid signature"}
    
    # –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
    update_data = await request.json()
    
    # –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤ —Ñ–æ–Ω–µ
    background_tasks.add_task(process_update, update_data)
    
    return {"ok": True}

async def process_update(update_data: dict):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç Telegram"""
    # –ó–¥–µ—Å—å —Å–æ–∑–¥–∞–µ—Ç—Å—è Update –æ–±—ä–µ–∫—Ç –∏ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ –¥–∏—Å–ø–µ—Ç—á–µ—Ä
    from aiogram.types import Update
    update = Update(**update_data)
    await dp.feed_update(bot, update)

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ webhook
async def set_webhook():
    webhook_url = f"https://yourdomain.com{WEBHOOK_PATH}"
    await bot.set_webhook(webhook_url, secret_token=WEBHOOK_SECRET)</code></pre>
      </details>
      
      <details>
        <summary><strong>–ö–∞–∫ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ?</strong></summary>
        <ul>
          <li>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –±–æ—Ç–æ–≤ (–Ω–µ—Å–∫–æ–ª—å–∫–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤)</li>
          <li>–í—ã–Ω–æ—Å–∏—Ç–µ —Ç—è–∂–µ–ª—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã</li>
          <li>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Redis –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–µ–∂–¥—É —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º–∏</li>
          <li>–†–µ–∞–ª–∏–∑—É–π—Ç–µ load balancing –¥–ª—è API</li>
          <li>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ message queues –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á</li>
        </ul>
      </details>
      
      <h3>–ü–æ–ª–µ–∑–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã</h3>
      <ul>
        <li><strong>–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è FastAPI</strong>: <span class="pill">https://fastapi.tiangolo.com</span></li>
        <li><strong>–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Aiogram</strong>: <span class="pill">https://docs.aiogram.dev</span></li>
        <li><strong>–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Redis</strong>: <span class="pill">https://redis.io/docs</span></li>
        <li><strong>–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Docker</strong>: <span class="pill">https://docs.docker.com</span></li>
        <li><strong>–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è SQLAlchemy</strong>: <span class="pill">https://docs.sqlalchemy.org</span></li>
        <li><strong>Telegram Bot API</strong>: <span class="pill">https://core.telegram.org/bots/api</span></li>
      </ul>
      
      <h3>–°–æ–æ–±—â–µ—Å—Ç–≤–∞ –∏ —Ñ–æ—Ä—É–º—ã</h3>
      <ul>
        <li><strong>FastAPI Discord</strong>: –ê–∫—Ç–∏–≤–Ω–æ–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤</li>
        <li><strong>Aiogram Telegram —á–∞—Ç</strong>: –†—É—Å—Å–∫–æ—è–∑—ã—á–Ω–æ–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ</li>
        <li><strong>Reddit r/Python</strong>: –û–±—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã –ø–æ Python</li>
        <li><strong>Stack Overflow</strong>: –í–æ–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã –ø–æ –≤—Å–µ–º —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º</li>
      </ul>
      
      <div class="tip">
        <strong>–°–æ–≤–µ—Ç—ã –ø–æ –¥–∞–ª—å–Ω–µ–π—à–µ–º—É –∏–∑—É—á–µ–Ω–∏—é:</strong>
        <ul>
          <li>–ò–∑—É—á–∏—Ç–µ advanced features FastAPI (dependencies, middleware, events)</li>
          <li>–ü–æ–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å –¥—Ä—É–≥–∏–º–∏ –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö (PostgreSQL, MongoDB)</li>
          <li>–ò–∑—É—á–∏—Ç–µ message brokers (RabbitMQ, Apache Kafka)</li>
          <li>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–ª–∞—á–Ω—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –¥–ª—è –¥–µ–ø–ª–æ—è (Heroku, AWS, Google Cloud)</li>
          <li>–ò–∑—É—á–∏—Ç–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤</li>
        </ul>
      </div>
      
      <div class="section-nav">
        <a href="#projects" class="nav-link">‚Üê –ü—Ä–µ–¥—ã–¥—É—â–∏–π: –ü—Ä–æ–µ–∫—Ç—ã</a>
      </div>
    </section>

    <p class="footer">¬© 2025 –£—á–µ–±–Ω—ã–π –∫–æ–Ω—Å–ø–µ–∫—Ç ‚Äî —Å–≤–æ–±–æ–¥–Ω–æ –¥–ª—è –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–ª–µ–π. –ê–≤—Ç–æ—Ä: –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è.</p>
  </div>
</body>
</html>